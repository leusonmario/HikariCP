language: java
sudo: required
cache:
  directories:
    - $HOME/.m2/repository
jdk:
  - oraclejdk8

install: /bin/true
  
script:
  - mvn install -Dskip.unit.tests=true -Dmaven.javadoc.skip=true -V -B
  - mvn clean -Dtest=ShutdownTest test jacoco:report coveralls:report
  - jdk_switcher use openjdk7

before_deploy:
  - tar -zcvf coverage-result.tar.gz /home/travis/build/leusonmario/HikariCP/target/site

deploy:
  provider: releases
  api_key: 
    secure: "jxkZD70c3ztipzXsjMKOmTvN1HzWCs+QN4jDMuopi+EpoCXUZs4HLYCzKDjpw0FjIpdx3LzT+fAH8t+wFZ5cuqxEkIeHRnjXpqIchbwbBqO59p+EPUR1k8ojeT9BqiriEIiJ/dQigDb8Z6YV9kKkfoiM/CnsNW7ISjJ+//aSZ4afSFpAGTEnOYFZN4kaBWCEu4hCapABR6JNWGDUPs0OvscSCZQSvakoo272bMd+bu9Swx8E8omIj6L4crHQJo80/3l+JUyWsGQEan1q2yGC4Vprx3BKNDEnJZ0+hzFneU7MJHhItHxR3uEQhkbFR34J+ng07J0+QHUBPfrLX0uLbc4sbGZ9hefzHIFBwiQlb2/zOm8zUL0Q06TdNy6OXx1AfcMlTh5Z2MLhZBGJPlblPz2wxLL2E4iiOiPP46W8tfkJLWlTB1ixL+VqnaD2cDj/m7NfwVkybjscnKopVqytO3iZh7A5KLmzHFQhhDdfgvxbzfTfqFEpAGyI9HmAVrAdu5bpYimUqUbRNAxmIEjBexdxUySMoM/Uyhqe2qyvsMlYlBA5scOBmlFIdiXGUFpKTMpZtjrObEccTismaYx/uX+P9xvfji7LQkvEiI6qdn/UWgMpTW3lZjLqlD5WDy45CYaRDamL8jA6JjUBQvVTZiUndjhXzQhBAm8Mew8Vbx0="
  file: coverage-result.tar.gz
  file_glob: true
  overwrite: true
  skip_cleanup: true
  on:
    tags: true